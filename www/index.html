<!doctype html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
        <title></title>
        <link rel="stylesheet" type="text/css" href="http://service.ihned.cz/js/tooltip/v1.1.2.css" />
        <link rel="stylesheet" href="http://datasklad.ihned.cz/dpp/mapbox/mapbox.css" />
        <script src='http://service.ihned.cz/js/leaflet/v0.6.4.js'></script>
        <script src='http://service.ihned.cz/js/leaflet/utfgrid.simple.js'></script>
        <script src="http://service.ihned.cz/js/jquery.min.js"></script>
        <script src="http://service.ihned.cz/js/tooltip/v1.1.2.min.js"></script>
        <style>
            #map {
                position: absolute;
                top: 0px;
                left: 0px;
                bottom: 0px;
                width: 100%;
            }
        </style>
    </head>
    <body>
        <div id="map">
        </div>
        <script>
            var tooltip = new Tooltip();
            var zoomLevel = 2;
            var tileCount = Math.pow(2, zoomLevel);
            var center = Math.round(tileCount / 2)
            var map = L.map('map', {
                minZoom: 2,
                maxZoom: 5,
                zoom: zoomLevel,
                center: [-70,-160],
                crs: L.CRS.Simple
            });
            var cloudmade = L.tileLayer('../data/kscm-2002/{z}/{x}/{y}.png', {

            }).addTo(map);
            var utfGrid = new L.UtfGrid('../data/kscm-2002/{z}/{x}/{y}.json', {
                useJsonP: false
            });
            map.addLayer(utfGrid);

            utfGrid.on('mouseover', function (e) {
                var str = "<b>" + e.data.name + "</b><br />Volební výsledek " + e.data.abbr + " v roce " + e.data.year + ": " + (e.data.percent * 100).toFixed(2) + "%  (" + e.data.count + " hlasů)<br />"
                tooltip.display(str);
            });
            utfGrid.on('mouseout', function (e) {
                tooltip.hide();
            });

        </script>
    </body>
</html>
